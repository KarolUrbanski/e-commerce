<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> CandyCrush </title>
    <link rel="stylesheet" href="assets/imageSlider/css/style.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="assets/articleProgresBar/css/style.css">
</head>

<body>

    <header>

        <div class="container">
            <div class="row">
                <div class="col-1">
                    <nav id="menu">
                        <ul class="main-menu" style="margin: -10px 0 5px; ">
                            <div id="LoginPara">
                            <li class="register-login"> <a href="login.html"> Login </a> </li>
                            <li class="register-login"> <a href="register.html"> Register </a> </li>
                            </div>
                        </ul>

                    </nav>
                </div>
            </div>
            <div class="row">
                <div class="col-1">
                    <div class="logo">
                        <a href="index.html"><img height="60px" src="imgs/logo2.png"></a>
                    </div>
                    <a class="mobile-menu-icon">
                        <img height="60px"
                            src="https://icon-library.com/images/menu-button-icon/menu-button-icon-7.jpg">
                    </a>
                    <nav id="menu">
                        <ul class="main-menu">
                            <li> <a href="index.html"> Home </a> </li>
                            <li> <a href="index.html#best_sellers"> Best sellers </a> </li>
                            <li> <a href="products-cattegories.html"> All products </a> </li>
                            <li> <a href="basket.html"> Basket </a> </li>
                            <li> <a href="index.html#about_us"> About us </a> </li>
                        </ul>

                    </nav>
                    <div class="searchBox">
                        <input class="searchInput"type="text" name="" placeholder="Search">
                        <button class="searchButton" href="#">
                           <img height="20px" src="https://cdn-icons-png.flaticon.com/512/54/54481.png">
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </header>

    <section id="best_sellers">

        <div class="container">
            <div class="row">
                <div class="col-1">
                    <h2> Sweet candies</h2>
                    <p> Lorem ipsum dolor sit amet, consectetur adipisci elit,<br> sed eiusmod tempor incidunt ut labore
                        et dolore magna aliqua. </p>
                </div>
            </div>
            <div class="row">
                <div class="col-1 text-right">
                    <form action="#">

                        <select class="sort" name="sort_list" id="sort_list" onchange="loadContent()">
                            <option value="">Default
                            <option value="N-a">Name : ascending</option>
                            <option value="N-d">Name : descending</option>
                            <option value="P-a" >Price High - Low
                            <option value="P-d" >Price Low - High
                        </select>
                        <span style="padding: 5px; float: right; font-size: x-large;">Sort by:</span>
                    </form>
                </div>
            </div>
        </div>
        <div class="grey-bg">
            <div class="container">
                <div id="ServerContent">
                    <p>Dinamicly loaded content goes here: 
                    </p>
                </div>   
            </div>
        </div>

    </section>


    <section class="divider">

        <div class="row">
            <div class="col-1">
                <h3> The best candies from around the world!</h3>
                <p> Only on our site :) </p>
            </div>
        </div>

    </section>

    <footer>

        <div class="container">
            <div class="row">
                <div class="col-2">
                    <p>&copy; 2022 www.CandyCrush.com</p>
                </div>
                <div class="col-2 text-right">
                    <p>Privacy policy</p>
                </div>
            </div>
        </div>

    </footer>
<!-- progress bar + script to it-->
<div class="article-progress-bar"></div>
<script src="assets/articleProgresBar/java/script.js"></script>

<!-- mobile menu showing after clicking it-->
<script src="js/mobile-nav.js"></script>

<!-- script for image slider to change image every 5s-->
<script src="assets/imageSlider/java/script.js"></script>

<!-- Script for checking if logged in-->
<script src="JS/check-login.js"></script>

</body>

</html>
<script>
    //sorting database
	function loadContent() {
		let sort = document.getElementById('sort_list').value;
		let request= new XMLHttpRequest();

		request.onload = () => {
			if (request.status === 200) {
				let responseData = request.responseText;

				document.getElementById('ServerContent').innerHTML = responseData;
			}
			else
				alert("error communicating wiuth serwer: " + request.status)
		};
		if (sort=="N-a") {
			request.open("GET","products.php?sort=Nasc&Category=Salty");
		}
		else if (sort=="N-d"){
			request.open("GET","products.php?sort=Ndesc&Category=Salty");
		
		}
		else if (sort=="P-a"){
			request.open("GET","products.php?sort=Pasc&Category=Salty");
		
		}
		else if (sort=="P-d"){
			request.open("GET","products.php?sort=Pdesc&Category=Salty");
		
		}
		else{
				request.open("GET","products.php?Category=Salty");
		}
	

		request.send();
	}

	//to show database with no need to press a button
	window.onload = () =>{
		let request= new XMLHttpRequest();

		request.onload = () => {
			if (request.status === 200) {
				let responseData = request.responseText;

				document.getElementById('ServerContent').innerHTML = responseData;
			}
			else
				alert("error communicating wiuth serwer: " + request.status)
		};

		request.open("GET","products.php?Category=Salty");
		request.send();
	}
</script>